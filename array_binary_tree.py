# -*- coding: utf-8 -*-
"""
Created on Sun Dec 21 14:45:15 2025

@author: chenl
å°†ä»»æ„çš„äºŒå‰æ ‘ä¸­çš„ Noneå…¨éƒ¨å¡«å……,å†ä½¿ç”¨å±‚æ¬¡éå†çš„æ–¹æ³•è¿›è¡Œå­˜å‚¨,åˆ™å¯ä»¥ç”¨æ•°ç»„è¡¨ç¤ºå‡ºæ¥.ç´¢å¼•0ä¸ºèµ·ç‚¹.
ç´¢å¼•ä¸ºiçš„èŠ‚ç‚¹å…¶å·¦å­èŠ‚ç‚¹ç´¢å¼•ä¸º2*i+1,å³ä¸º2*i+2.å¯ä»¥é€šè¿‡æ•°å­¦å½’çº³æ³•è¯æ˜:
    âœ… è¦è¯æ˜çš„å‘½é¢˜
å¯¹äºä¸€æ£µå®Œå…¨äºŒå‰æ ‘ï¼ˆæˆ–æ»¡äºŒå‰æ ‘ï¼‰ï¼ŒæŒ‰å±‚åºéå†ï¼ˆBFSï¼‰é¡ºåºå­˜å‚¨äºä»ç´¢å¼• 0 å¼€å§‹çš„æ•°ç»„ä¸­ï¼Œåˆ™å¯¹ä»»æ„éå¶å­èŠ‚ç‚¹ iï¼š

å…¶å·¦å­©å­çš„ç´¢å¼•ä¸º 2i + 1
å…¶å³å­©å­çš„ç´¢å¼•ä¸º 2i + 2
æˆ‘ä»¬åªè¯å·¦å­©å­ï¼ˆå³å­©å­åŒç†ï¼Œåªéœ€ +1 å³å¯ï¼‰ã€‚

ğŸ”§ å½’çº³æ³•ç»“æ„
åŸºç¡€æ­¥éª¤ï¼ˆBase Caseï¼‰
éªŒè¯å½“ i = 0ï¼ˆæ ¹èŠ‚ç‚¹ï¼‰æ—¶ï¼Œç»“è®ºæˆç«‹ã€‚

å½’çº³å‡è®¾ï¼ˆInductive Hypothesisï¼‰
å‡è®¾å¯¹æ‰€æœ‰ k < nï¼ˆå…¶ä¸­ n â‰¥ 1ï¼‰ï¼Œå‘½é¢˜æˆç«‹ï¼Œå³ï¼š

èŠ‚ç‚¹ k çš„å·¦å­©å­ç´¢å¼•ä¸º 2k + 1
å½’çº³æ­¥éª¤ï¼ˆInductive Stepï¼‰
è¯æ˜ï¼šèŠ‚ç‚¹ n çš„å·¦å­©å­ç´¢å¼•ä¸º 2n + 1

ğŸ“˜ è¯¦ç»†è¯æ˜
1. åŸºç¡€æ­¥éª¤ï¼ši = 0
æ ¹èŠ‚ç‚¹ä½äºæ•°ç»„ç´¢å¼• 0
åœ¨å±‚åºéå†ä¸­ï¼Œæ ¹å‡ºé˜Ÿåï¼Œå…ˆå°†å…¶å·¦å­©å­å…¥é˜Ÿï¼Œå†å³å­©å­å…¥é˜Ÿ
å› æ­¤å·¦å­©å­æˆä¸ºæ•°ç»„ä¸­ç¬¬ 1 ä¸ªå­èŠ‚ç‚¹ â†’ ç´¢å¼•ä¸º 1
è€Œ 2Ã—0 + 1 = 1ï¼Œæˆç«‹ âœ…
åŒç†ï¼Œå³å­©å­ç´¢å¼• 2 = 2Ã—0 + 2ï¼Œä¹Ÿæˆç«‹ã€‚

2. å½’çº³å‡è®¾
å‡è®¾å¯¹æ‰€æœ‰èŠ‚ç‚¹ç´¢å¼• k æ»¡è¶³ 0 â‰¤ k < nï¼Œå…¶å·¦å­©å­ç´¢å¼•ä¸º 2k + 1ï¼Œå³å­©å­ä¸º 2k + 2ã€‚

è¿™æ„å‘³ç€ï¼šå‰ n ä¸ªèŠ‚ç‚¹ï¼ˆç´¢å¼• 0 åˆ° nâˆ’1ï¼‰çš„æ‰€æœ‰å­èŠ‚ç‚¹åœ¨æ•°ç»„ä¸­çš„ä½ç½®å·²æ­£ç¡®æ”¾ç½®ã€‚

3. å½’çº³æ­¥éª¤ï¼šè¯æ˜èŠ‚ç‚¹ n çš„å·¦å­©å­ç´¢å¼•ä¸º 2n + 1
å…³é”®è§‚å¯Ÿï¼šæ•°ç»„æ˜¯æŒ‰ BFS é¡ºåºæ„å»ºçš„
BFS ä½¿ç”¨é˜Ÿåˆ—ï¼Œåˆå§‹ [0]
æ¯æ¬¡å‡ºé˜Ÿä¸€ä¸ªèŠ‚ç‚¹ kï¼Œå°±å°†å…¶å·¦å³å­©å­ï¼ˆå¦‚æœå­˜åœ¨ï¼‰ä¾æ¬¡å…¥é˜Ÿ
æ•°ç»„ç´¢å¼• = èŠ‚ç‚¹å…¥é˜Ÿçš„é¡ºåºï¼ˆä» 0 å¼€å§‹ï¼‰
å› æ­¤ï¼Œåˆ°èŠ‚ç‚¹ n è¢«è®¿é—®ï¼ˆå‡ºé˜Ÿï¼‰æ—¶ï¼Œå‰é¢ n ä¸ªèŠ‚ç‚¹ï¼ˆ0 åˆ° nâˆ’1ï¼‰éƒ½å·²å‡ºé˜Ÿï¼Œå¹¶ä¸”å®ƒä»¬çš„å­©å­éƒ½å·²å…¥é˜Ÿã€‚

è®¡ç®—ï¼šåœ¨èŠ‚ç‚¹ n å‡ºé˜Ÿå‰ï¼Œå·²æœ‰å¤šå°‘ä¸ªå­èŠ‚ç‚¹è¢«åŠ å…¥ï¼Ÿ
æ¯ä¸ªèŠ‚ç‚¹æœ€å¤šæœ‰ 2 ä¸ªå­©å­ï¼ˆå®Œå…¨äºŒå‰æ ‘ï¼‰
å‰ n ä¸ªèŠ‚ç‚¹ï¼ˆ0 åˆ° nâˆ’1ï¼‰å…±äº§ç”Ÿ 2n ä¸ªå­èŠ‚ç‚¹
è¿™äº›å­èŠ‚ç‚¹å æ®å“ªäº›æ•°ç»„ä½ç½®ï¼Ÿ

æ ¹èŠ‚ç‚¹ï¼ˆ0ï¼‰æœ¬èº«å ç´¢å¼• 0
å®ƒçš„å­©å­ä»ç´¢å¼• 1 å¼€å§‹
æ‰€ä»¥å‰ n ä¸ªçˆ¶èŠ‚ç‚¹äº§ç”Ÿçš„ 2n ä¸ªå­©å­ï¼Œæ­£å¥½å æ®æ•°ç»„ç´¢å¼•ï¼š
1, 2, 3, â€¦, 2n
âœ… ä¸¾ä¾‹ï¼šn=2 â†’ å‰ 2 ä¸ªèŠ‚ç‚¹ï¼ˆ0,1ï¼‰â†’ 4 ä¸ªå­©å­ â†’ ç´¢å¼• 1~4

é‚£ä¹ˆï¼Œä¸‹ä¸€ä¸ªå¯ç”¨ç´¢å¼•æ˜¯å¤šå°‘ï¼Ÿ
æœ€åä¸€ä¸ªå·²è¢«å ç”¨çš„ç´¢å¼•æ˜¯ 2n
æ‰€ä»¥ä¸‹ä¸€ä¸ªç©ºä½æ˜¯ 2n + 1
è€Œè¿™ä¸ªä½ç½®ï¼Œæ­£æ˜¯èŠ‚ç‚¹ n çš„å·¦å­©å­å°†è¦æ”¾å…¥çš„ä½ç½®ï¼

å› æ­¤ï¼ŒèŠ‚ç‚¹ n çš„å·¦å­©å­ç´¢å¼• = 2n + 1ï¼Œå¾—è¯ âœ…

åŒç†ï¼Œå³å­©å­ä¸º 2n + 2ã€‚

4. ç»“è®º
ç”±æ•°å­¦å½’çº³æ³•ï¼š

åŸºç¡€æƒ…å†µæˆç«‹
è‹¥å¯¹æ‰€æœ‰ k < n æˆç«‹ï¼Œåˆ™å¯¹ n ä¹Ÿæˆç«‹
å› æ­¤ï¼Œå¯¹æ‰€æœ‰éè´Ÿæ•´æ•° iï¼ˆåªè¦èŠ‚ç‚¹ i å­˜åœ¨ä¸”æœ‰å­©å­ï¼‰ï¼Œå…¶å·¦å­©å­ç´¢å¼•ä¸º 2i + 1ï¼Œå³å­©å­ä¸º 2i + 2ã€‚

æ ¹æ®è¯¥å…¬å¸å¯ä»¥åæ¨,å…¶çˆ¶èŠ‚ç‚¹ç´¢å¼•ä¸º(i-1)//2
"""
from binary_tree import n1,TreeNode
from binary_tree_bfs import level_order

class ArrayBinaryTree:
    '''
    æ•°ç»„è¡¨ç¤ºçš„äºŒå‰æ ‘ç±»
    è¾“å…¥ä¸ºåŒ…å«Noneçš„äºŒå‰æ ‘å±‚æ¬¡éå†ç»“æœ
    å¯ä»¥æ‰§è¡Œæœç´¢ å±‚æ¬¡éå†å’Œæ·±åº¦ä¼˜å…ˆæœç´¢çš„åŠŸèƒ½
    '''
    
    
    def __init__(self,arr:list[int|None]):
        '''æ„é€ æ–¹æ³•'''
        self._tree = list(arr)
        
    def size(self):
        '''åˆ—è¡¨å®¹é‡'''
        return len(self._tree)
    
    def val(self,i:int):
        '''è·å–ç´¢å¼•ä¸ºièŠ‚ç‚¹çš„å€¼'''
        if i<0 or i>= self.size():
            return self._tree[i]
        
    def left(self,i:int):
        '''è·å–ç´¢å¼•ä¸ºièŠ‚ç‚¹çš„å·¦èŠ‚ç‚¹çš„ç´¢å¼•'''
        return 2*i+1
    
    def right(self,i:int):
        '''è·å–ç´¢å¼•ä¸ºièŠ‚ç‚¹çš„å³èŠ‚ç‚¹çš„ç´¢å¼•'''
        return 2*i+2
    
    def parent(self,i:int):
        '''è·å–ç´¢å¼•ä¸ºièŠ‚ç‚¹çš„çˆ¶èŠ‚ç‚¹çš„ç´¢å¼•'''
        return (i-1)//2 
    
    def level_order(self):
        self.res = []
        for i,val in enumerate(self._tree):
            if val is not None:
                self.res.append(val)
        return self.res 
    
    def dfs(self,order:str):
        '''æ·±åº¦ä¼˜å…ˆéå†'''
        pass
        
    
if __name__ == '__main__':
    lis = level_order(n1)
    print(lis)
    tree = ArrayBinaryTree(lis)
    print(tree.level_order())

'''
[1, 2, 3, 4, 5]
[1, 2, 3, 4, 5]
'''




































